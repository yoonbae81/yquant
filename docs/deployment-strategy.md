# VM ë°°í¬ ì „ëµ (Deployment Strategy)

## 1. ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­
- **VM ì‚¬ì–‘**: Oracle Cloud, 1 OCPU, 1GB RAM
- **VM ìˆ˜ëŸ‰**: 2ëŒ€ (ìµœì†Œ) ~ 3ëŒ€ (ê¶Œì¥)
- **ìƒì‹œ ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤**: Valkey, BrokerGateway, Web, Webhook, OrderManager
- **ì§€ë¦¬ì  ë°°ì¹˜**: 
  - VM1 + VM3 (Webhook): ê°™ì€ ë¦¬ì „ í•„ìˆ˜ (íŠ¸ë ˆì´ë”© í¬ë¦¬í‹°ì»¬ íŒ¨ìŠ¤)
  - VM2 (Web): ìœ„ì¹˜ ìœ ì—° (ë‹¤ë¥¸ ë¦¬ì „ ë°°ì¹˜ ê°€ëŠ¥)

### í†µì‹  íŒ¨í„´ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      íŠ¸ë ˆì´ë”© í¬ë¦¬í‹°ì»¬ íŒ¨ìŠ¤                        â”‚
â”‚  (ì €ì§€ì—° í•„ìˆ˜: VM1 + VM3ëŠ” ê°™ì€ ë¦¬ì „)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  TradingView â”€â”€(ì¸í„°ë„·)â”€â”€â–¶ VM3 Webhook â”€â”€(1-2ms)â”€â”€â–¶ VM1 Valkey  â”‚
â”‚                                            â”‚                    â”‚
â”‚                                            â–¼                    â”‚
â”‚                                      OrderManager (ë¡œì»¬)        â”‚
â”‚                                            â”‚                    â”‚
â”‚                                            â–¼                    â”‚
â”‚                                      BrokerGateway (ë¡œì»¬)       â”‚
â”‚                                            â”‚                    â”‚
â”‚                                            â–¼                    â”‚
â”‚                                        KIS API                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ëª¨ë‹ˆí„°ë§ íŒ¨ìŠ¤ (ë¹„í¬ë¦¬í‹°ì»¬)                    â”‚
â”‚  (ì§€ì—° í—ˆìš©: VM2ëŠ” ë‹¤ë¥¸ ë¦¬ì „ ê°€ëŠ¥)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ì‚¬ìš©ì â”€â”€(ì¸í„°ë„·)â”€â”€â–¶ VM2 Web â”€â”€(30-100ms í—ˆìš©)â”€â”€â–¶ VM1 Valkey    â”‚
â”‚                         â”‚                                       â”‚
â”‚                         â””â”€ ê³„ì¢Œ/í¬ì§€ì…˜/ì£¼ì‹ ì •ë³´ ì¡°íšŒ (ì½ê¸°)      â”‚
â”‚                         â””â”€ ìˆ˜ë™ ì£¼ë¬¸ ë°œí–‰ (ì €ë¹ˆë„)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. ê° ì»´í¬ë„ŒíŠ¸ ë¶„ì„

### 2.1. Valkey
- **ë©”ëª¨ë¦¬ í’‹í”„ë¦°íŠ¸**: ~50-100MB (ë°ì´í„° í¬ê¸°ì— ë”°ë¼ ë³€ë™)
- **ì—­í• **: Pub/Sub ë©”ì‹œì§• í—ˆë¸Œ + ìƒíƒœ ìºì‹±
- **í†µì‹  íŒ¨í„´**: ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í†µì‹  (ì¤‘ì•™ í—ˆë¸Œ)
- **íŠ¹ì§•**: 
  - ë„¤íŠ¸ì›Œí¬ ì§€ì—°ì— ë¯¼ê°
  - ëª¨ë“  ì„œë¹„ìŠ¤ì˜ ì˜ì¡´ì„±

### 2.2. BrokerGateway
- **ë©”ëª¨ë¦¬ í’‹í”„ë¦°íŠ¸**: ~150-200MB (ASP.NET Core ëŸ°íƒ€ì„ + KIS API í´ë¼ì´ì–¸íŠ¸)
- **ì—­í• **: ì¦ê¶Œì‚¬ API ì—°ë™, ê³„ì¢Œ/í¬ì§€ì…˜ ë™ê¸°í™”
- **í†µì‹  íŒ¨í„´**:
  - Valkeyì™€ **ë§¤ìš° ë¹ˆë²ˆí•œ í†µì‹ ** (order, query ì±„ë„ êµ¬ë…, execution ë°œí–‰)
  - ì™¸ë¶€ KIS API í˜¸ì¶œ
- **íŠ¹ì§•**:
  - Valkeyì™€ì˜ ì €ì§€ì—° í†µì‹  í•„ìˆ˜
  - CPU ì‚¬ìš©ëŸ‰ ì¤‘ê°„ (API í˜¸ì¶œ ì²˜ë¦¬)

### 2.3. Web (Dashboard)
- **ë©”ëª¨ë¦¬ í’‹í”„ë¦°íŠ¸**: ~200-250MB (ASP.NET Core + Blazor Server + SignalR + Webhook)
- **ì—­í• **: ì›¹ UI, ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§, ìˆ˜ë™ ì£¼ë¬¸, TradingView Webhook ìˆ˜ì‹ 
- **í†µì‹  íŒ¨í„´**:
  - Valkeyì™€ **ë¹ˆë²ˆí•œ ì½ê¸°** (ê³„ì¢Œ, í¬ì§€ì…˜, ì£¼ì‹ ì •ë³´ ì¡°íšŒ)
  - Valkeyë¡œ **ê°€ë” ì“°ê¸°** (ìˆ˜ë™ ì£¼ë¬¸, ì˜ˆì•½ ì£¼ë¬¸ ì„¤ì •)
  - Valkeyë¡œ **ì‹ í˜¸ ë°œí–‰** (TradingView webhook â†’ signal ì±„ë„)
  - ì‚¬ìš©ì ë¸Œë¼ìš°ì €ì™€ WebSocket ì—°ê²°
- **íŠ¹ì§•**:
  - ê°€ì¥ í° ë©”ëª¨ë¦¬ í’‹í”„ë¦°íŠ¸ (Blazor Server ëŸ°íƒ€ì„)
  - ì‚¬ìš©ì ì ‘ì† ì‹œ ë©”ëª¨ë¦¬ ì¦ê°€

### 2.4. OrderManager
- **ë©”ëª¨ë¦¬ í’‹í”„ë¦°íŠ¸**: ~100-150MB (.NET ì½˜ì†” ì•± + ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
- **ì—­í• **: ì‹ í˜¸ â†’ ì£¼ë¬¸ ë³€í™˜, ì˜ˆì•½ ì£¼ë¬¸ ì‹¤í–‰, ì²­ì‚° ê´€ë¦¬
- **í†µì‹  íŒ¨í„´**:
  - Valkeyì™€ **ë¹ˆë²ˆí•œ í†µì‹ ** (signal êµ¬ë…, order ë°œí–‰)
  - Valkeyì—ì„œ ê³„ì¢Œ/í¬ì§€ì…˜ ì½ê¸° (ë¦¬ìŠ¤í¬ ì²´í¬)
- **íŠ¹ì§•**:
  - ì¤‘ê°„ ìˆ˜ì¤€ì˜ ë©”ëª¨ë¦¬ ì‚¬ìš©
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ë¡œ CPU ì‚¬ìš©

### 2.5. Webhook (ë¶„ë¦¬ ì‹œ - Minimal API)
- **ë©”ëª¨ë¦¬ í’‹í”„ë¦°íŠ¸**: ~40-60MB (Minimal API + Valkey í´ë¼ì´ì–¸íŠ¸ë§Œ)
- **ì—­í• **: TradingView ì‹ í˜¸ ìˆ˜ì‹  ë° Valkey ë°œí–‰
- **í†µì‹  íŒ¨í„´**:
  - Valkeyë¡œ **ì €ë¹ˆë„ ì“°ê¸°** (ì‹ í˜¸ ë°œìƒ ì‹œì—ë§Œ signal ì±„ë„ ë°œí–‰)
  - ì™¸ë¶€ TradingViewë¡œë¶€í„° HTTP POST ìˆ˜ì‹ 
- **íŠ¹ì§•**:
  - **ê·¹ë„ë¡œ ê²½ëŸ‰**: Blazor/SignalR ì—†ì´ ìˆœìˆ˜ Minimal APIë§Œ ì‚¬ìš©
  - **ë‹¨ìˆœ ë¡œì§**: í˜ì´ë¡œë“œ ê²€ì¦ â†’ Valkey ë°œí–‰ë§Œ ìˆ˜í–‰
  - **ë‚®ì€ CPU ì‚¬ìš©**: ì´ë²¤íŠ¸ ê¸°ë°˜, ëŒ€ê¸° ìƒíƒœê°€ ëŒ€ë¶€ë¶„
  - **ë©”ëª¨ë¦¬ ì ˆê° íš¨ê³¼**: Webì—ì„œ ë¶„ë¦¬ ì‹œ Webì€ ~160-200MBë¡œ ê°ì†Œ

**Webhook ê²½ëŸ‰í™” ìƒì„¸ ë¶„ì„**:
```
ê¸°ì¡´ Web (í†µí•©):           ~230MB
  â”œâ”€ ASP.NET Core:         ~40MB
  â”œâ”€ Blazor Server:        ~80MB
  â”œâ”€ SignalR:              ~30MB
  â”œâ”€ MudBlazor:            ~40MB
  â”œâ”€ Valkey Client:         ~10MB
  â”œâ”€ Services:             ~20MB
  â””â”€ Webhook Logic:        ~10MB

ë¶„ë¦¬ í›„:
  Web (Dashboard):         ~170MB (Webhook ë¡œì§ ì œê±°)
  Webhook (Minimal):       ~50MB
    â”œâ”€ ASP.NET Core:       ~35MB
    â”œâ”€ Valkey Client:       ~10MB
    â””â”€ Webhook Logic:      ~5MB
```

## 3. ë°°í¬ ë°©ì•ˆ

### âœ… **ë°©ì•ˆ A: 2-VM êµ¬ì„± (í˜„ì¬ í†µí•© ìƒíƒœ)**

#### **VM1 - ë°±ì—”ë“œ í—ˆë¸Œ (Backend Hub)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VM1: 1 OCPU, 1GB RAM                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Valkey            (~80MB)          â”‚
â”‚ â€¢ BrokerGateway    (~180MB)         â”‚
â”‚ â€¢ OrderManager     (~120MB)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ ì˜ˆìƒ ë©”ëª¨ë¦¬: ~380-450MB          â”‚
â”‚ ì—¬ìœ  ë©”ëª¨ë¦¬: ~550-620MB             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **VM2 - í”„ë¡ íŠ¸ì—”ë“œ (Frontend)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VM2: 1 OCPU, 1GB RAM                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Web (Dashboard + Webhook)         â”‚
â”‚                    (~230MB)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ ì˜ˆìƒ ë©”ëª¨ë¦¬: ~230-300MB          â”‚
â”‚ ì—¬ìœ  ë©”ëª¨ë¦¬: ~700-770MB             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì **:
- âœ… VM ë¹„ìš© ì ˆê° (2ëŒ€ë§Œ ì‚¬ìš©)
- âœ… ê´€ë¦¬ í¬ì¸íŠ¸ ìµœì†Œí™”
- âœ… ì¶©ë¶„í•œ ë©”ëª¨ë¦¬ ì—¬ìœ  (ê° VM 60-70% ì‚¬ìš©ë¥ )
- âœ… ê³ ë¹ˆë„ í†µì‹ (BrokerGateway â†” Valkey) ë¡œì»¬í™”

**ë‹¨ì **:
- âš ï¸ Webhook ì¥ì•  ì‹œ ì „ì²´ Web ì„œë¹„ìŠ¤ ì˜í–¥
- âš ï¸ Web ì¬ì‹œì‘ ì‹œ Webhookë„ í•¨ê»˜ ì¤‘ë‹¨
- âš ï¸ ë³´ì•ˆ: Webê³¼ Webhookì´ ê°™ì€ ì—”ë“œí¬ì¸íŠ¸

---

### âœ… **ë°©ì•ˆ B: 3-VM êµ¬ì„± (Webhook ë¶„ë¦¬ - ê¶Œì¥)**

Oracle Cloud Free TierëŠ” ìµœëŒ€ 4ê°œì˜ ARM ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë¬´ë£Œë¡œ ì œê³µí•˜ë¯€ë¡œ, 3-VM êµ¬ì„±ë„ ë¹„ìš© ë¶€ë‹´ ì—†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

#### **VM1 - ë°±ì—”ë“œ í—ˆë¸Œ (Backend Hub)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VM1: 1 OCPU, 1GB RAM                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Valkey            (~80MB)          â”‚
â”‚ â€¢ BrokerGateway    (~180MB)         â”‚
â”‚ â€¢ OrderManager     (~120MB)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ ì˜ˆìƒ ë©”ëª¨ë¦¬: ~380-450MB          â”‚
â”‚ ì—¬ìœ  ë©”ëª¨ë¦¬: ~550-620MB             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **VM2 - í”„ë¡ íŠ¸ì—”ë“œ (Frontend)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VM2: 1 OCPU, 1GB RAM                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Web (Dashboard only) (~170MB)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ ì˜ˆìƒ ë©”ëª¨ë¦¬: ~170-220MB          â”‚
â”‚ ì—¬ìœ  ë©”ëª¨ë¦¬: ~780-830MB (80%)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **VM3 - ì‹ í˜¸ ìˆ˜ì‹  (Signal Ingress)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VM3: 1 OCPU, 1GB RAM                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Webhook (Minimal API) (~50MB)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ ì˜ˆìƒ ë©”ëª¨ë¦¬: ~50-80MB            â”‚
â”‚ ì—¬ìœ  ë©”ëª¨ë¦¬: ~920-950MB (92%)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì **:
- âœ… **ìµœê³  ìˆ˜ì¤€ì˜ ì¥ì•  ê²©ë¦¬**: ê° ê³„ì¸µì´ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘
- âœ… **ë³´ì•ˆ ê°•í™”**: VM3ë§Œ ì™¸ë¶€(TradingView)ì— ë…¸ì¶œ, VM1/VM2ëŠ” ë‚´ë¶€ë§ë§Œ
- âœ… **ë¬´ì¤‘ë‹¨ ë°°í¬**: ê° ì„œë¹„ìŠ¤ ë…ë¦½ ì—…ë°ì´íŠ¸ ê°€ëŠ¥
- âœ… **ë©”ëª¨ë¦¬ ì—¬ìœ **: VM2(80%), VM3(92%)
- âœ… **ë¹„ìš© ë¬´ë£Œ**: Oracle Free Tier ë²”ìœ„ ë‚´
- âœ… **í™•ì¥ì„±**: Webhook ë¡œë“œë°¸ëŸ°ì‹± ì‹œ VM3ë§Œ ì¶”ê°€

**ë‹¨ì **:
- âš ï¸ ê´€ë¦¬ í¬ì¸íŠ¸ ì¦ê°€ (3ëŒ€ì˜ VM)
- âš ï¸ ë„¤íŠ¸ì›Œí¬ í™‰ ì¦ê°€ (Webhook â†’ VM1 ValkeyëŠ” ì›ê²© í†µì‹ )
  - í•˜ì§€ë§Œ Webhookì€ ì €ë¹ˆë„ í†µì‹ ì´ë¯€ë¡œ ì˜í–¥ ë¯¸ë¯¸ (1-2ms ì¶”ê°€)

**Webhook ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë¶„ì„**:
```
ì‹ í˜¸ ìˆ˜ì‹  ê²½ë¡œ:
TradingView â†’ VM3 Webhook â†’ VM1 Valkey (ì›ê²©) â†’ VM1 OrderManager (ë¡œì»¬)

ì˜ˆìƒ ì§€ì—°:
  - TradingView â†’ VM3: ~100-300ms (ì¸í„°ë„·)
  - VM3 â†’ VM1 Valkey: ~1-2ms (Oracle ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬)
  - VM1 Valkey â†’ OrderManager: <1ms (ë¡œì»¬)
  
ì´ ì§€ì—°: ~101-303ms (ëŒ€ë¶€ë¶„ ì¸í„°ë„· êµ¬ê°„)
ê²°ë¡ : VM3 ë¶„ë¦¬ë¡œ ì¸í•œ ì¶”ê°€ ì§€ì—°ì€ 1-2msë¡œ ë¬´ì‹œ ê°€ëŠ¥
```

**Web Dashboard ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë¶„ì„**:
```
Webì˜ í†µì‹  íŒ¨í„´ ë¶„ì„:
1. ì‚¬ìš©ì â†’ VM2 Web: ë¸Œë¼ìš°ì € ì ‘ì† (ì§€ì—° ë¬´ê´€)
2. VM2 â†’ VM1 Valkey: ê³„ì¢Œ/í¬ì§€ì…˜/ì£¼ì‹ ì •ë³´ ì¡°íšŒ (ì½ê¸° ì¤‘ì‹¬)
   - ë¹ˆë„: ì‚¬ìš©ì í˜ì´ì§€ ë¡œë“œ ì‹œ, ìˆ˜ë™ ì£¼ë¬¸ ì‹œ (ì €ë¹ˆë„)
   - ë°ì´í„° í¬ê¸°: ìˆ˜ KB ~ ìˆ˜ì‹­ KB
   - ì§€ì—° í—ˆìš©ë„: 100-200msê¹Œì§€ ì‚¬ìš©ì ê²½í—˜ì— ì˜í–¥ ì—†ìŒ

ê²°ë¡ : VM2ëŠ” VM1ê³¼ ë¬¼ë¦¬ì ìœ¼ë¡œ ë©€ë¦¬ ë–¨ì–´ì ¸ë„ ë¬´ë°©
  - ê°™ì€ ë¦¬ì „ ë‚´: ~1-5ms ì¶”ê°€ (ê¶Œì¥)
  - ë‹¤ë¥¸ ë¦¬ì „ ê°„: ~50-100ms ì¶”ê°€ (í—ˆìš© ê°€ëŠ¥)
  - ë‹¤ë¥¸ ëŒ€ë¥™ ê°„: ~200-300ms ì¶”ê°€ (ë¹„ê¶Œì¥, í•˜ì§€ë§Œ ê¸°ìˆ ì ìœ¼ë¡œ ê°€ëŠ¥)
```

**ì§€ë¦¬ì  ë°°ì¹˜ ì „ëµ**:
```
ì‹œë‚˜ë¦¬ì˜¤ 1: ëª¨ë‘ ê°™ì€ ë¦¬ì „ (ì˜ˆ: Seoul)
  VM1 (Seoul) â† 1ms â†’ VM2 (Seoul)
  VM1 (Seoul) â† 1ms â†’ VM3 (Seoul)
  ì¥ì : ìµœì € ì§€ì—°, ê´€ë¦¬ í¸ì˜ì„±
  ë‹¨ì : ë¦¬ì „ ì¥ì•  ì‹œ ì „ì²´ ì‹œìŠ¤í…œ ì¤‘ë‹¨

ì‹œë‚˜ë¦¬ì˜¤ 2: VM2ë§Œ ë‹¤ë¥¸ ë¦¬ì „ (ì˜ˆ: Tokyo)
  VM1 (Seoul) â† 1ms â†’ VM3 (Seoul)  â† í•µì‹¬ íŠ¸ë ˆì´ë”© ê²½ë¡œ
  VM1 (Seoul) â† 30ms â†’ VM2 (Tokyo)  â† ëª¨ë‹ˆí„°ë§ë§Œ
  ì¥ì : íŠ¸ë ˆì´ë”© ì§€ì—° ìµœì†Œí™”, ë¹„ìš© ìµœì í™” ê°€ëŠ¥
  ë‹¨ì : Web ì‘ë‹µ ì†ë„ ì•½ê°„ ëŠë¦¼ (ì‚¬ìš©ì ê²½í—˜ì—ëŠ” ë¬´ê´€)

ì‹œë‚˜ë¦¬ì˜¤ 3: ì§€ì—­ë³„ Web ë°°í¬
  VM1 (Seoul) â† 1ms â†’ VM3 (Seoul)
  VM1 (Seoul) â† 30ms â†’ VM2-KR (Tokyo)
  VM1 (Seoul) â† 200ms â†’ VM2-US (San Jose)
  ì¥ì : ì „ ì„¸ê³„ ì‚¬ìš©ìì—ê²Œ ë¹ ë¥¸ Web ì ‘ì† ì œê³µ
  ë‹¨ì : ê´€ë¦¬ ë³µì¡ë„ ì¦ê°€
```

**í•µì‹¬ ì¸ì‚¬ì´íŠ¸**:
> âœ… **VM1 + VM3ëŠ” ë°˜ë“œì‹œ ê°™ì€ ë¦¬ì „ì— ë°°ì¹˜** (íŠ¸ë ˆì´ë”© í¬ë¦¬í‹°ì»¬ íŒ¨ìŠ¤)
> âœ… **VM2ëŠ” ìœ„ì¹˜ ìœ ì—°ì„± ë†’ìŒ** (ì½ê¸° ì¤‘ì‹¬, ì €ë¹ˆë„, ì§€ì—° í—ˆìš©)
> âœ… **ë¹„ìš© ìµœì í™”**: VM2ë¥¼ ë” ì €ë ´í•œ ë¦¬ì „ì— ë°°ì¹˜ ê°€ëŠ¥
> âœ… **ê¸€ë¡œë²Œ í™•ì¥**: VM2ë¥¼ ì—¬ëŸ¬ ë¦¬ì „ì— ë³µì œí•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ ê°œì„  ê°€ëŠ¥

---

### ğŸ¯ **ìµœì¢… ê¶Œì¥: ë°©ì•ˆ B (3-VM êµ¬ì„±)**

**ì„ íƒ ì´ìœ **:
1. **Oracle Free Tier í™œìš©**: ë¬´ë£Œ ë²”ìœ„ ë‚´ì—ì„œ ìµœëŒ€ ì•ˆì •ì„± í™•ë³´
2. **í”„ë¡œë•ì…˜ ì¤€ë¹„**: ì¥ì•  ê²©ë¦¬ ë° ë³´ì•ˆ ê°•í™”ë¡œ ìš´ì˜ ì•ˆì •ì„± ê·¹ëŒ€í™”
3. **í™•ì¥ì„±**: í–¥í›„ Webhook ë¡œë“œë°¸ëŸ°ì‹± ì‹œ VM3ë§Œ ì¶”ê°€í•˜ë©´ ë¨
4. **ë©”ëª¨ë¦¬ íš¨ìœ¨**: ê° VMì´ ì—¬ìœ ë¡­ê²Œ ìš´ì˜ (50-90% ì—¬ìœ )

**2-VM vs 3-VM ì„ íƒ ê°€ì´ë“œ**:
| ê¸°ì¤€ | 2-VM (ë°©ì•ˆ A) | 3-VM (ë°©ì•ˆ B) |
|------|---------------|---------------|
| **ë¹„ìš©** | ë¬´ë£Œ | ë¬´ë£Œ |
| **ê´€ë¦¬ ë³µì¡ë„** | ë‚®ìŒ | ì¤‘ê°„ |
| **ì¥ì•  ê²©ë¦¬** | ì¤‘ê°„ | ë†’ìŒ |
| **ë³´ì•ˆ** | ì¤‘ê°„ | ë†’ìŒ |
| **ë¬´ì¤‘ë‹¨ ë°°í¬** | ë¶ˆê°€ | ê°€ëŠ¥ |
| **ë©”ëª¨ë¦¬ ì—¬ìœ ** | 60-70% | 80-92% |
| **ê¶Œì¥ ì‹œë‚˜ë¦¬ì˜¤** | ê°œë°œ/í…ŒìŠ¤íŠ¸ | í”„ë¡œë•ì…˜ |

## 4. ì—°ê²° ì„¤ì •

### 4.1. ë°©ì•ˆ A (2-VM) ì„¤ì •

#### VM1 ì„¤ì • (`appsecrets.json`)
```json
{
  "Valkey": {
    "Message": "localhost:6379",
    "Token": "localhost:6379"
     }
}
```

#### VM2 ì„¤ì • (`appsecrets.json`)
```json
{
  "Valkey": {
    "Message": "<VM1_PRIVATE_IP>:6379",
    "Token": "<VM1_PRIVATE_IP>:6379"
  }
}
```

### 4.2. ë°©ì•ˆ B (3-VM) ì„¤ì •

#### VM1 ì„¤ì • (`appsecrets.json`)
```json
{
  "Valkey": {
    "Message": "localhost:6379",
    "Token": "localhost:6379"
  }
}
```

#### VM2 ì„¤ì • (`appsecrets.json`)
```json
{
  "Valkey": {
    "Message": "<VM1_PRIVATE_IP>:6379",
    "Token": "<VM1_PRIVATE_IP>:6379"
  }
}
```

#### VM3 ì„¤ì • (`appsecrets.json`)
```json
{
  "Valkey": {
    "Message": "<VM1_PRIVATE_IP>:6379",
    "Token": "<VM1_PRIVATE_IP>:6379"
  }
}
```

### 4.3. Valkey ì„¤ì • (`/etc/valkey/valkey.conf`)
```conf
# VM1ì—ì„œ Valkeyê°€ ì™¸ë¶€ ì ‘ì†ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì„¤ì •
bind 0.0.0.0
protected-mode yes
requirepass <STRONG_PASSWORD>

# ë©”ëª¨ë¦¬ ì œí•œ ì„¤ì • (ì•ˆì „ ë§ˆì§„ í™•ë³´)
maxmemory 200mb
maxmemory-policy allkeys-lru
```

## 5. ëŒ€ì•ˆ ë°©ì•ˆ ë¹„êµ (ë¹„ê¶Œì¥)

### âŒ **ëŒ€ì•ˆ 1: VM1 (Valkey + Web) + VM2 (BrokerGateway + OrderManager)**
```
VM1: Valkey(80MB) + Web(230MB) = ~310MB
VM2: BrokerGateway(180MB) + OrderManager(120MB) = ~300MB
```

**ë‹¨ì **:
- BrokerGateway â†” Valkey ê°„ **ê³ ë¹ˆë„ í†µì‹ ì´ ë„¤íŠ¸ì›Œí¬ë¥¼ ê²½ìœ **í•˜ì—¬ ì§€ì—° ë°œìƒ
- ì£¼ë¬¸ ì‹¤í–‰ ê²½ë¡œ(OrderManager â†’ Valkey â†’ BrokerGateway)ê°€ VM ê°„ ì™•ë³µí•˜ì—¬ **ë ˆì´í„´ì‹œ ì¦ê°€**

### âŒ **ëŒ€ì•ˆ 2: VM1 (Valkey + OrderManager) + VM2 (BrokerGateway + Web)**
```
VM1: Valkey(80MB) + OrderManager(120MB) = ~200MB
VM2: BrokerGateway(180MB) + Web(230MB) = ~410MB
```

**ë‹¨ì **:
- BrokerGateway â†” Valkey ê°„ **ê°€ì¥ ë¹ˆë²ˆí•œ í†µì‹ ì´ ë„¤íŠ¸ì›Œí¬ ê²½ìœ **
- VM2ì˜ ë©”ëª¨ë¦¬ ì••ë°• (410MB, ì—¬ìœ  ê³µê°„ ë¶€ì¡±)

## 6. ìš´ì˜ ê°€ì´ë“œ

### 6.1. ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
```bash
# ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸
free -h
ps aux --sort=-%mem | head -10

# Valkey ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸ (VM1)
valkey-cli -a <PASSWORD> INFO memory
```

### 6.2. í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ (systemd)

#### ë°©ì•ˆ A (2-VM)
```bash
# VM1
sudo systemctl start valkey
sudo systemctl start yquant-brokergateway
sudo systemctl start yquant-ordermanager

# VM2
sudo systemctl start yquant-web
```

#### ë°©ì•ˆ B (3-VM)
```bash
# VM1
sudo systemctl start valkey
sudo systemctl start yquant-brokergateway
sudo systemctl start yquant-ordermanager

# VM2
sudo systemctl start yquant-web

# VM3
sudo systemctl start yquant-webhook
```

### 6.3. ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ

#### ë°©ì•ˆ A (2-VM) ë°©í™”ë²½ ì„¤ì •
```bash
# VM1: Valkey í¬íŠ¸ë¥¼ VM2ì—ì„œë§Œ ì ‘ê·¼ í—ˆìš©
sudo firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="<VM2_PRIVATE_IP>" port protocol="tcp" port="6379" accept'
sudo firewall-cmd --reload
```

#### ë°©ì•ˆ B (3-VM) ë°©í™”ë²½ ì„¤ì •
```bash
# VM1: Valkey í¬íŠ¸ë¥¼ VM2, VM3ì—ì„œë§Œ ì ‘ê·¼ í—ˆìš©
sudo firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="<VM2_PRIVATE_IP>" port protocol="tcp" port="6379" accept'
sudo firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="<VM3_PRIVATE_IP>" port protocol="tcp" port="6379" accept'
sudo firewall-cmd --reload

# VM3: Webhook í¬íŠ¸ë§Œ ì™¸ë¶€ ë…¸ì¶œ
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

### 6.4. ì¥ì•  ëŒ€ì‘

#### Valkey ì—°ê²° ì‹¤íŒ¨ ì‹œ
- **ì¦ìƒ**: Web/Webhookì—ì„œ "Valkey connection failed" ì—ëŸ¬
- **í™•ì¸**: VM1ì—ì„œ `valkey-cli -a <PASSWORD> ping` ì‹¤í–‰
- **ì¡°ì¹˜**: 
  1. VM1 Valkey ì¬ì‹œì‘: `sudo systemctl restart valkey`
  2. ë°©í™”ë²½ ê·œì¹™ í™•ì¸
  3. ì—°ê²° ë¬¸ìì—´ í™•ì¸

#### ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ
- **ì¦ìƒ**: OOM Killer ë°œë™, í”„ë¡œì„¸ìŠ¤ ê°•ì œ ì¢…ë£Œ
- **í™•ì¸**: `dmesg | grep -i "out of memory"`
- **ì¡°ì¹˜**:
  1. Valkey maxmemory ì„¤ì • ì¶•ì†Œ
  2. Webì˜ SignalR ì—°ê²° ìˆ˜ ì œí•œ
  3. ë¶ˆí•„ìš”í•œ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ

## 7. ì„±ëŠ¥ ì˜ˆì¸¡

### 7.1. ë ˆì´í„´ì‹œ

#### ë°©ì•ˆ A (2-VM)
```
TradingView â†’ VM2 Web/Webhook â†’ VM1 Valkey â†’ VM1 OrderManager â†’ VM1 BrokerGateway
ì˜ˆìƒ ì§€ì—°: ~102ms (ì¸í„°ë„· 100ms + ë‚´ë¶€ë§ 2ms)
```

#### ë°©ì•ˆ B (3-VM)
```
TradingView â†’ VM3 Webhook â†’ VM1 Valkey â†’ VM1 OrderManager â†’ VM1 BrokerGateway
ì˜ˆìƒ ì§€ì—°: ~103ms (ì¸í„°ë„· 100ms + ë‚´ë¶€ë§ 3ms)
```

**ê²°ë¡ **: ë‘ ë°©ì•ˆì˜ ë ˆì´í„´ì‹œ ì°¨ì´ëŠ” 1msë¡œ ë¬´ì‹œ ê°€ëŠ¥

### 7.2. ì²˜ë¦¬ëŸ‰
- **ì´ˆë‹¹ ì£¼ë¬¸ ì²˜ë¦¬**: ~100 orders/sec (Valkey Pub/Sub ê¸°ì¤€)
- **ë™ì‹œ ì‚¬ìš©ì**: ~10ëª… (Web, Blazor Server ê¸°ì¤€)

## 8. í–¥í›„ í™•ì¥ ê³ ë ¤ì‚¬í•­

### 8.1. ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ
1. **Webì„ ì •ì  íŒŒì¼ + APIë¡œ ë¶„ë¦¬** (Blazor WASM ì „í™˜)
2. **Valkeyë¥¼ ì™¸ë¶€ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ë¡œ ì´ì „** (Valkey Cloud, AWS ElastiCache)

### 8.2. ê³ ê°€ìš©ì„± í•„ìš” ì‹œ
1. **VM4 ì¶”ê°€**: Valkey Sentinel êµ¬ì„± (ìë™ í˜ì¼ì˜¤ë²„)
2. **BrokerGateway ì´ì¤‘í™”**: Active-Standby êµ¬ì„±
3. **Webhook ë¡œë“œë°¸ëŸ°ì‹±**: VM3 ë³µì œ + Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ

### 8.3. ë¹„ìš© ìµœì í™” (VM2 ì§€ë¦¬ì  ë°°ì¹˜ í™œìš©)

Oracle Cloud Free TierëŠ” ë¦¬ì „ë³„ë¡œ ì œê³µë˜ë¯€ë¡œ, VM2ì˜ ìœ„ì¹˜ ìœ ì—°ì„±ì„ í™œìš©í•˜ì—¬ ë¹„ìš©ì„ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì „ëµ 1: ì €ë ´í•œ ë¦¬ì „ í™œìš©**
```
VM1 + VM3: Seoul (íŠ¸ë ˆì´ë”© í•µì‹¬, í•œêµ­ ì‹œì¥ ì ‘ê·¼ì„±)
VM2: Mumbai / Singapore (Free Tier ì—¬ìœ  ìˆëŠ” ë¦¬ì „)

ì¥ì :
  - Free Tier í•œë„ë¥¼ ì—¬ëŸ¬ ë¦¬ì „ì— ë¶„ì‚°
  - VM2ì˜ 30-50ms ì¶”ê°€ ì§€ì—°ì€ ì‚¬ìš©ì ê²½í—˜ì— ë¬´ê´€
  - ë¦¬ì „ ì¥ì•  ì‹œ ë‹¤ë¥¸ ë¦¬ì „ì˜ VM2ë¡œ í˜ì¼ì˜¤ë²„ ê°€ëŠ¥
```

**ì „ëµ 2: ì‚¬ìš©ì ìœ„ì¹˜ ê¸°ë°˜ ë°°ì¹˜**
```
ì£¼ ì‚¬ìš©ìê°€ í•œêµ­: VM2ë¥¼ Seoul/Tokyoì— ë°°ì¹˜
ì£¼ ì‚¬ìš©ìê°€ ë¯¸êµ­: VM2ë¥¼ San Joseì— ë°°ì¹˜
ì£¼ ì‚¬ìš©ìê°€ ìœ ëŸ½: VM2ë¥¼ Frankfurtì— ë°°ì¹˜

ì¥ì :
  - ì‚¬ìš©ì ë¸Œë¼ìš°ì € â†’ VM2 ì§€ì—° ìµœì†Œí™”
  - VM2 â†’ VM1 ì§€ì—°ì€ í—ˆìš© ë²”ìœ„ (100-200ms)
```

**ì „ëµ 3: ê°œë°œ/í”„ë¡œë•ì…˜ ë¶„ë¦¬**
```
í”„ë¡œë•ì…˜: VM1 + VM3 (Seoul)
ê°œë°œ/í…ŒìŠ¤íŠ¸: VM2 (Tokyo, ë³„ë„ Free Tier ê³„ì •)

ì¥ì :
  - í”„ë¡œë•ì…˜ í™˜ê²½ ê²©ë¦¬
  - ê°œë°œ í™˜ê²½ì´ í”„ë¡œë•ì…˜ íŠ¸ë ˆì´ë”©ì— ì˜í–¥ ì—†ìŒ
```


## 9. ê²°ë¡ 

### ìµœì¢… ê¶Œì¥ ë°°í¬ êµ¬ì„±: **ë°©ì•ˆ B (3-VM)**

**êµ¬ì„±**:
- **VM1**: Valkey + BrokerGateway + OrderManager (ë°±ì—”ë“œ í—ˆë¸Œ)
- **VM2**: Web Dashboard (í”„ë¡ íŠ¸ì—”ë“œ)
- **VM3**: Webhook Minimal API (ì‹ í˜¸ ìˆ˜ì‹ )

**í•µì‹¬ ì´ìœ **:
1. âœ… **ì €ì§€ì—° í†µì‹ **: ê³ ë¹ˆë„ í†µì‹ (BrokerGateway â†” Valkey)ì„ ë¡œì»¬í™”
2. âœ… **ë©”ëª¨ë¦¬ ì—¬ìœ **: ê° VMì´ 50-90% ì—¬ìœ  ê³µê°„ í™•ë³´
3. âœ… **ì¥ì•  ê²©ë¦¬**: ê° ê³„ì¸µì´ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘
4. âœ… **ë³´ì•ˆ ê°•í™”**: ì™¸ë¶€ ë…¸ì¶œ ìµœì†Œí™” (Webhookë§Œ)
5. âœ… **ë¬´ì¤‘ë‹¨ ë°°í¬**: ê° ì„œë¹„ìŠ¤ ë…ë¦½ ì—…ë°ì´íŠ¸ ê°€ëŠ¥
6. âœ… **ë¹„ìš© íš¨ìœ¨**: Oracle Free Tier ë²”ìœ„ ë‚´
7. âœ… **ì§€ë¦¬ì  ìœ ì—°ì„±**: VM2ëŠ” ìœ„ì¹˜ ì œì•½ ì—†ìŒ (ì½ê¸° ì¤‘ì‹¬, ì €ë¹ˆë„)

### ì§€ë¦¬ì  ë°°ì¹˜ ê¶Œì¥ ì‚¬í•­

**í•„ìˆ˜ ìš”êµ¬ì‚¬í•­**:
```
VM1 + VM3: ë°˜ë“œì‹œ ê°™ì€ ë¦¬ì „ (ì˜ˆ: Seoul)
  ì´ìœ : íŠ¸ë ˆì´ë”© í¬ë¦¬í‹°ì»¬ íŒ¨ìŠ¤, 1-2ms ì§€ì—° í•„ìˆ˜
```

**ìœ ì—°í•œ ë°°ì¹˜**:
```
VM2: ìœ„ì¹˜ ììœ 
  - ê¶Œì¥: VM1ê³¼ ê°™ì€ ë¦¬ì „ (ê´€ë¦¬ í¸ì˜ì„±)
  - í—ˆìš©: ë‹¤ë¥¸ ë¦¬ì „ (ë¹„ìš© ìµœì í™”, ì‚¬ìš©ì ì ‘ê·¼ì„±)
  - ì˜í–¥: 30-100ms ì¶”ê°€ ì§€ì—° (ì‚¬ìš©ì ê²½í—˜ì— ë¬´ê´€)
```

**ì‹¤ì „ ë°°ì¹˜ ì˜ˆì‹œ**:
```
ê¸°ë³¸ êµ¬ì„± (ê¶Œì¥):
  VM1: Seoul (Valkey + BrokerGateway + OrderManager)
  VM2: Seoul (Web Dashboard)
  VM3: Seoul (Webhook)

ë¹„ìš© ìµœì í™”:
  VM1: Seoul (Valkey + BrokerGateway + OrderManager)
  VM2: Tokyo (Web Dashboard) â† ë‹¤ë¥¸ ë¦¬ì „ Free Tier í™œìš©
  VM3: Seoul (Webhook)

ê¸€ë¡œë²Œ ì‚¬ìš©ì:
  VM1: Seoul (Valkey + BrokerGateway + OrderManager)
  VM2-KR: Tokyo (Web Dashboard - ì•„ì‹œì•„ ì‚¬ìš©ì)
  VM2-US: San Jose (Web Dashboard - ë¯¸êµ­ ì‚¬ìš©ì)
  VM3: Seoul (Webhook)
```

### í•µì‹¬ ì¸ì‚¬ì´íŠ¸ ìš”ì•½

**ì§ˆë¬¸**: Webhookì„ ë¶„ë¦¬í•˜ë©´ VM2ëŠ” ë¬¼ë¦¬ì ìœ¼ë¡œ ë©€ë¦¬ ìˆì–´ë„ ë˜ë‚˜ìš”?

**ë‹µë³€**: âœ… **ë„¤, ë§ìŠµë‹ˆë‹¤!**

**ì´ìœ **:
1. **Webì˜ í†µì‹  íŒ¨í„´**: ì½ê¸° ì¤‘ì‹¬, ì €ë¹ˆë„ (í˜ì´ì§€ ë¡œë“œ, ìˆ˜ë™ ì£¼ë¬¸)
2. **ì§€ì—° í—ˆìš©ë„**: 100-200ms ì¶”ê°€ ì§€ì—°ë„ ì‚¬ìš©ì ê²½í—˜ì— ì˜í–¥ ì—†ìŒ
3. **íŠ¸ë ˆì´ë”© ê²½ë¡œ ë¶„ë¦¬**: 
   - **í¬ë¦¬í‹°ì»¬**: TradingView â†’ VM3 â†’ VM1 (Valkey) â†’ OrderManager â†’ BrokerGateway
   - **ë¹„í¬ë¦¬í‹°ì»¬**: ì‚¬ìš©ì â†’ VM2 â†’ VM1 (Valkey ì¡°íšŒ)
4. **ë¹„ìš© ìµœì í™”**: VM2ë¥¼ ë‹¤ë¥¸ ë¦¬ì „ì— ë°°ì¹˜í•˜ì—¬ Free Tier í•œë„ ë¶„ì‚° ê°€ëŠ¥

**Webhook ë©”ëª¨ë¦¬ ë‹µë³€**:
> Minimal APIë¡œ ê²½ëŸ‰í™” ì‹œ Webhookì€ **ì•½ 40-60MB** (í‰ê·  50MB)ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
> ì´ëŠ” ê¸°ì¡´ Web í†µí•© ëŒ€ë¹„ **180MB ì ˆê°** íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.
